# MATH 数据集详细分析报告

## 一、数据集概况

### 规模
- **训练集**: 12,000 题
- **测试集**: 500 题
- **总计**: 12,500 题高中竞赛级数学题

### 数据来源
- AMC 10/12 (美国数学竞赛)
- AIME (美国数学邀请赛)
- 其他高水平数学竞赛

---

## 二、数据字段说明

每条数据包含以下 6 个字段：

| 字段 | 类型 | 说明 | 示例 |
|------|------|------|------|
| `problem` | string | 数学题目（LaTeX格式） | "How many vertical asymptotes does..." |
| `solution` | string | 详细解答步骤 | "The denominator factors into..." |
| `answer` | string | 最终答案（LaTeX格式） | "2" 或 "\\frac{7}{20}" |
| `subject` | string | 学科分类 | "Algebra", "Geometry" 等 |
| `level` | string | 难度等级（1-5） | "3" |
| `unique_id` | string | 唯一标识符 | "test/algebra/1.json" |

---

## 三、学科分布

### 训练集学科分布（12,000 题）

| 学科 | 题目数 | 占比 | 难度特点 |
|------|--------|------|----------|
| **Algebra**（代数） | 2,807 | 23.39% | 基础到中等，涵盖方程、不等式、函数 |
| **Intermediate Algebra**（中级代数） | 2,101 | 17.51% | 高级代数，多项式、复数、数列 |
| **Prealgebra**（预代数） | 1,994 | 16.62% | 入门级，算术、分数、百分比 |
| **Number Theory**（数论） | 1,347 | 11.22% | 整除性、素数、模运算 |
| **Geometry**（几何） | 1,309 | 10.91% | 平面几何、立体几何、解析几何 |
| **Precalculus**（微积分预备） | 1,235 | 10.29% | 三角函数、向量、极坐标 |
| **Counting & Probability**（计数与概率） | 1,207 | 10.06% | 组合、排列、概率论 |

### 测试集学科分布（500 题）

| 学科 | 题目数 | 占比 | 训练/测试比例 |
|------|--------|------|---------------|
| Algebra | 124 | 24.80% | 22.6:1 |
| Intermediate Algebra | 97 | 19.40% | 21.7:1 |
| Prealgebra | 82 | 16.40% | 24.3:1 |
| Number Theory | 62 | 12.40% | 21.7:1 |
| Precalculus | 56 | 11.20% | 22.1:1 |
| Geometry | 41 | 8.20% | 31.9:1 |
| Counting & Probability | 38 | 7.60% | 31.8:1 |

**观察**：训练集和测试集的学科分布基本一致，比例约为 24:1。

---

## 四、难度分布

### 训练集难度分布

| 难度 | 题目数 | 占比 | 说明 |
|------|--------|------|------|
| **Level 1** ★ | 958 | 7.98% | 最简单，适合初学者 |
| **Level 2** ★★ | 2,152 | 17.93% | 基础题 |
| **Level 3** ★★★ | 2,619 | 21.82% | 中等难度 |
| **Level 4** ★★★★ | 2,776 | 23.13% | 较难，需要深入理解 |
| **Level 5** ★★★★★ | 3,495 | 29.12% | 最难，竞赛级别 |

### 测试集难度分布

| 难度 | 题目数 | 占比 |
|------|--------|------|
| Level 1 ★ | 43 | 8.60% |
| Level 2 ★★ | 90 | 18.00% |
| Level 3 ★★★ | 105 | 21.00% |
| Level 4 ★★★★ | 128 | 25.60% |
| Level 5 ★★★★★ | 134 | 26.80% |

**特点**：
- 难度分布呈**金字塔结构**，Level 5 题目最多（约 29%）
- 强调高难度推理能力
- 训练集和测试集难度分布一致

---

## 五、文本长度统计

### 训练集

|  | 最小 | 最大 | 平均 | 中位数 |
|---|------|------|------|--------|
| **题目** | 16 字符 | 4,309 字符 | 202 字符 | 146 字符 |
| **解答** | 26 字符 | 6,767 字符 | 539 字符 | 404 字符 |
| **答案** | 0 字符 | 159 字符 | 6 字符 | 3 字符 |

### 测试集

|  | 最小 | 最大 | 平均 | 中位数 |
|---|------|------|------|--------|
| **题目** | 20 字符 | 1,733 字符 | 195 字符 | 148 字符 |
| **解答** | 45 字符 | 3,356 字符 | 531 字符 | 422 字符 |
| **答案** | 1 字符 | 53 字符 | 5 字符 | 3 字符 |

**观察**：
- 题目平均约 200 字符（1-2 句话）
- 解答平均约 530 字符（详细推导过程）
- 答案平均仅 5-6 字符（简洁最终结果）

---

## 六、答案格式分析

### 训练集答案格式统计

| 格式类型 | 数量 | 占比 | 示例 |
|----------|------|------|------|
| **纯数字** | 7,754 | 64.6% | `"2"`, `"42"`, `"1.36"` |
| **包含分数** `\frac` | 1,896 | 15.8% | `"\frac{7}{20}"`, `"\frac{14}{3}"` |
| **包含根号** `\sqrt` | 614 | 5.1% | `"\sqrt{5}"`, `"2\sqrt{149}"` |
| **包含 π** `\pi` | 257 | 2.1% | `"25\pi"`, `"\frac{\pi}{2}"` |
| **包含文本** `\text` | 242 | 2.0% | `"\text{Evelyn}"` |

### 测试集答案格式统计

| 格式类型 | 数量 | 占比 |
|----------|------|------|
| 纯数字 | 321 | 64.2% |
| 包含分数 | 68 | 13.6% |
| 包含根号 | 24 | 4.8% |
| 包含 π | 10 | 2.0% |
| 包含文本 | 10 | 2.0% |

**关键点**：
- 约 **65%** 是纯数字答案
- 约 **35%** 包含 LaTeX 符号，需要符号计算能力
- 评测时需要**数学等价性判断**（如 `0.5` = `\frac{1}{2}`）

---

## 七、数据样例展示

### 样例 1：代数（Level 3）

**题目**：
```
How many vertical asymptotes does the graph of y=\frac{2}{x^2+x-6} have?
```

**中文**：函数 y=2/(x²+x-6) 的图像有多少条垂直渐近线？

**解答**：
```
The denominator factors into x^2+x-6=(x-2)(x+3). 
Since the numerator is always nonzero, there is a vertical asymptote 
whenever the denominator is 0, which occurs for x=2 and x=-3.
Therefore, the graph has 2 vertical asymptotes.
```

**答案**：`2`

---

### 样例 2：几何（Level 2）

**题目**：
```
A regular hexagon can be divided into six equilateral triangles. 
If the perimeter of one of the triangles is 21 inches, 
what is the perimeter, in inches, of the regular hexagon?
```

**中文**：正六边形可以分成 6 个等边三角形。如果一个三角形的周长是 21 英寸，正六边形的周长是多少英寸？

**解答**：
```
The side length of the hexagon equals the side length of a triangle.
Since the hexagon has 6 sides and the triangle has 3 sides,
the perimeter of the hexagon is twice the perimeter of a triangle.
Therefore, the perimeter is 2(21 inches) = 42 inches.
```

**答案**：`42`

---

### 样例 3：中级代数（Level 5，竞赛级）

**题目**：
```
Define p = sum_{k=1}^∞ 1/k^2 and q = sum_{k=1}^∞ 1/k^3.
Find sum_{j=1}^∞ sum_{k=1}^∞ 1/(j+k)^3 in terms of p and q.
```

**中文**：定义 p = Σ(1/k²) 和 q = Σ(1/k³)，求 ΣΣ 1/(j+k)³ 关于 p 和 q 的表达式。

**解答**：（涉及高级求和技巧与重新分组）

**答案**：`p - q`

---

## 八、与 GSM8K 的对比

| 特征 | GSM8K | MATH |
|------|-------|------|
| **难度** | 小学应用题 | 高中竞赛数学 |
| **题目类型** | 文字应用题 | 多领域数学问题 |
| **答案格式** | 纯数字 `#### 72` | LaTeX `\boxed{...}` |
| **解答风格** | 分步计算 `<<48/2=24>>` | 数学推导与证明 |
| **评测难度** | 简单（字符串比较） | 复杂（需解析 LaTeX，判断数学等价性） |
| **推理深度** | 1-3 步算术 | 多步逻辑推理+符号运算 |
| **训练集规模** | 7,474 题 | 12,000 题 |
| **测试集规模** | 1,320 题 | 500 题 |
| **学科分类** | 无 | 7 个数学子领域 |
| **难度分级** | 无 | 5 级（1-5） |

**关键差异**：
1. **MATH 更难**：需要高级数学知识（三角、数论、几何证明等）
2. **MATH 需要符号计算**：35% 答案包含 LaTeX 符号
3. **MATH 推理链更长**：平均解答 530 字符 vs GSM8K 约 150 字符
4. **MATH 评测更复杂**：需要判断数学等价性，不能简单字符串匹配

---

## 九、使用建议

### 1. 模型训练
- **输入格式**：`problem` 字段
- **输出格式**：`solution` (推理过程) + `answer` (最终答案)
- **损失计算**：可选只在 `answer` 上计算，或全程生成 `solution`

### 2. 评测方法
推荐使用 **符号计算库**（如 `sympy`）进行答案等价性判断：

```python
import sympy as sp

def is_equivalent(pred, gold):
    """判断预测答案和标准答案是否数学等价"""
    try:
        pred_expr = sp.sympify(pred)
        gold_expr = sp.sympify(gold)
        return sp.simplify(pred_expr - gold_expr) == 0
    except:
        return pred.strip() == gold.strip()
```

### 3. 难度选择
- **Level 1-2**：适合初步验证模型基础能力
- **Level 3-4**：考察中等推理能力
- **Level 5**：竞赛级，当前 SOTA 模型准确率仍较低（<50%）

### 4. 学科侧重
如果研究特定领域推理能力，可按 `subject` 字段筛选：
- 代数推理 → `Algebra` + `Intermediate Algebra`
- 几何推理 → `Geometry`
- 概率推理 → `Counting & Probability`

---

## 十、数据集特色

### 优点
✅ **高质量人工标注**：来自真实竞赛题目  
✅ **详细解答步骤**：每题都有完整推导过程  
✅ **多样化学科**：覆盖 7 个数学子领域  
✅ **明确难度分级**：便于分层评估  
✅ **标准化答案格式**：使用 `\boxed{}` 标记  

### 挑战
⚠️ **LaTeX 解析复杂**：需要专门的符号计算工具  
⚠️ **答案等价性判断**：`0.5` ≈ `\frac{1}{2}` ≈ `\frac{2}{4}`  
⚠️ **推理链长**：平均 530 字符，上下文需求大  
⚠️ **多模态需求**：部分题目包含 Asymptote 绘图代码  

---

## 十一、性能基准（2021 年论文）

| 模型 | 准确率 |
|------|--------|
| **人类数学竞赛选手** | ~40% |
| GPT-3 (175B, few-shot) | 5.0% |
| GPT-3 + 微调 | 6.9% |
| 验证器辅助 | ~8% |

**注**：当前 SOTA 模型（2024）在此数据集上的表现已显著提升，但 Level 5 题目仍具挑战性。

---

## 十二、引用

```bibtex
@article{hendrycksmath2021,
    title={Measuring Mathematical Problem Solving With the MATH Dataset},
    author={Dan Hendrycks and Collin Burns and Saurav Kadavath 
            and Akul Arora and Steven Basart and Eric Tang 
            and Dawn Song and Jacob Steinhardt},
    journal={NeurIPS Datasets and Benchmarks Track},
    year={2021}
}
```

**论文链接**: https://arxiv.org/abs/2103.03874

---

## 附录：快速统计

```
训练集：12,000 题
├─ 学科最多：Algebra (2,807)
├─ 难度最多：Level 5 (3,495)
├─ 平均题目长度：202 字符
├─ 平均解答长度：539 字符
└─ 纯数字答案：64.6%

测试集：500 题
├─ 学科分布与训练集一致
├─ 难度分布与训练集一致
└─ 训练/测试比例：约 24:1
```

---

**分析完成时间**: 2024  
**工具**: Python + JSON 解析  
**数据文件**: `train-00000-of-00001.parquet.json`, `test-00000-of-00001.parquet.json`

